# 🌐 TTUGTTAG 웹 인터페이스

Streamlit 기반의 개인화 혜택 추천 시스템 웹 앱입니다.

## 🚀 빠른 시작

### 1. 자동 실행 (권장)

```bash
cd web
python run_app.py
```

이 스크립트는 다음을 자동으로 수행합니다:
- 의존성 패키지 확인 및 설치
- 데이터베이스 존재 여부 확인
- Streamlit 앱 실행

### 2. 수동 실행

```bash
cd web
streamlit run streamlit_app.py
```

### 3. 브라우저 접속

웹 앱이 실행되면 브라우저에서 다음 주소로 접속하세요:
```
http://localhost:8501
```

## 🎯 주요 기능

### 💬 채팅 인터페이스
- 직관적인 대화형 UI
- 실시간 메시지 표시
- 검색 과정 시각화

### ⚙️ 시스템 제어
- RAG 시스템 초기화
- 데이터베이스 연결 상태 확인
- 디버그 모드 토글

### 📊 실시간 통계
- 검색 횟수 및 성공률
- 사용자 소비 패턴 분석
- 시스템 상태 모니터링

### 💡 예시 쿼리
- 원클릭 테스트 기능
- 다양한 검색 시나리오 제공

## 🛠️ 시스템 요구사항

### 필수 패키지
```
streamlit>=1.28.0
langgraph>=0.0.40
chromadb>=0.4.0
requests>=2.31.0
numpy>=1.24.0
tqdm>=4.65.0
```

### 설치 방법
```bash
pip install -r requirements.txt
```

## 📁 파일 구조

```
web/
├── streamlit_app.py      # 메인 Streamlit 앱
├── run_app.py           # 자동 실행 스크립트
├── requirements.txt     # 의존성 패키지
└── README.md           # 이 파일
```

## 🎮 사용법

### 1. 시스템 초기화
1. 사이드바의 "🔄 RAG 시스템 초기화" 버튼 클릭
2. 시스템 상태가 "🟢 시스템 준비 완료"로 변경될 때까지 대기

### 2. 질문하기
1. 메인 화면의 텍스트 영역에 질문 입력
2. "🚀 검색 시작" 버튼 클릭
3. AI가 개인화된 혜택을 추천해줍니다

### 3. 예시 쿼리 사용
사이드바의 예시 쿼리 버튼을 클릭하여 다양한 시나리오를 테스트할 수 있습니다:
- "스타벅스 할인 혜택 있어?"
- "내 소비 패턴에 맞는 혜택 추천해줘"
- "카페 할인 이벤트 궁금해"
- "편의점 쿠폰 있나?"
- "이마트에서 10만원 썼어, 혜택 추천해줘"

## 🔧 설정 옵션

### 디버그 모드
- 사이드바의 "🐛 디버그 모드" 체크박스로 토글
- 활성화 시 상세한 검색 과정을 확인할 수 있습니다

### 사용자 이력
- 시스템 초기화 시 자동으로 샘플 사용자 이력이 로드됩니다
- 사이드바에서 소비 패턴을 확인할 수 있습니다

## 📊 대시보드 정보

### 실시간 통계
- **총 대화 수**: 전체 대화 횟수
- **검색 횟수**: 성공적인 검색 횟수

### 시스템 정보
- RAG 시스템 활성화 상태
- ChromaDB 연결 상태
- 개인화 엔진 준비 상태

### 최근 검색 결과
- 최근 3개의 검색 결과를 미리보기로 제공
- 결과 내용을 확장하여 전체 내용 확인 가능

## 🐛 문제 해결

### 의존성 오류
```bash
pip install --upgrade streamlit langgraph chromadb
```

### 데이터베이스 연결 실패
1. `tools/build_database.py`를 먼저 실행하여 데이터베이스 구축
2. 웹 앱 재시작

### 포트 충돌
다른 포트로 실행:
```bash
streamlit run streamlit_app.py --server.port 8502
```

## 🔄 업데이트

### 앱 재시작
변경사항을 적용하려면 웹 앱을 재시작하세요:
1. 터미널에서 `Ctrl+C`로 앱 중지
2. `python run_app.py`로 재시작

### 캐시 초기화
Streamlit 캐시 문제가 발생하면:
```bash
streamlit cache clear
```

## 📞 지원

문제가 발생하면 다음을 확인해주세요:
1. 모든 의존성 패키지가 설치되었는지
2. 데이터베이스가 올바르게 구축되었는지
3. API 키가 올바르게 설정되었는지

---

**TTUGTTAG 웹 인터페이스** - 개인화 혜택 추천 시스템 🌐 