# π― LangGraph κΈ°λ° κ°μΈν™” ννƒ μ¶”μ² RAG μ‹μ¤ν…

> **TTUGTTAG (The Ultimate Guide To The Best Offers & Deals)**

μ‚¬μ©μμ μ†λΉ„ ν¨ν„΄μ„ λ¶„μ„ν•μ—¬ κ°μΈν™”λ ννƒκ³Ό ν• μΈ μ •λ³΄λ¥Ό μ¶”μ²ν•λ” AI κΈ°λ° RAG(Retrieval-Augmented Generation) μ‹μ¤ν…μ…λ‹λ‹¤.

## π“‹ λ©μ°¨

- [ν”„λ΅μ νΈ κ°μ”](#-ν”„λ΅μ νΈ-κ°μ”)
- [μ£Όμ” κΈ°λ¥](#-μ£Όμ”-κΈ°λ¥)
- [μ‹μ¤ν… μ•„ν‚¤ν…μ²](#-μ‹μ¤ν…-μ•„ν‚¤ν…μ²)
- [μ„¤μΉ λ° μ‹¤ν–‰](#-μ„¤μΉ-λ°-μ‹¤ν–‰)
- [μ›Ή μΈν„°νμ΄μ¤](#-μ›Ή-μΈν„°νμ΄μ¤)
- [ν…μ¤νΈ](#-ν…μ¤νΈ)
- [μ‚¬μ©λ²•](#-μ‚¬μ©λ²•)
- [API κµ¬μ΅°](#-api-κµ¬μ΅°)
- [λ°μ΄ν„° κµ¬μ΅°](#-λ°μ΄ν„°-κµ¬μ΅°)
- [κΈ°μ  μ¤νƒ](#-κΈ°μ -μ¤νƒ)
- [ν”„λ΅μ νΈ κµ¬μ΅°](#-ν”„λ΅μ νΈ-κµ¬μ΅°)
- [μμ‹](#-μμ‹)
- [κΈ°μ—¬ν•κΈ°](#-κΈ°μ—¬ν•κΈ°)

## π― ν”„λ΅μ νΈ κ°μ”

μ΄ μ‹μ¤ν…μ€ λ‹¤μκ³Ό κ°™μ€ νΉμ§•μ„ κ°€μ§€κ³  μμµλ‹λ‹¤:

- **κ°μΈν™” μ¶”μ²**: μ‚¬μ©μμ κ³Όκ±° μ†λΉ„ μ΄λ ¥μ„ κΈ°λ°μΌλ΅ λ§μ¶¤ν• ννƒ μ¶”μ²
- **λ‹¤μ¤‘ κ²€μƒ‰ μ „λµ**: μ§μ ‘ κ²€μƒ‰ β†’ λ²΅ν„° κ²€μƒ‰ β†’ ν…μ¤νΈ κ²€μƒ‰ β†’ μ‹¤μ‹κ°„ κ²€μƒ‰μ λ‹¨κ³„μ  μ ‘κ·Ό
- **μ‹¤μ‹κ°„ μ •λ³΄**: Perplexity APIλ¥Ό ν†µν• μµμ‹  ννƒ μ •λ³΄ μ κ³µ
- **LangGraph μ›ν¬ν”λ΅μ°**: μ²΄κ³„μ μ΄κ³  ν™•μ¥ κ°€λ¥ν• κ²€μƒ‰ νμ΄ν”„λΌμΈ
- **μ›Ή μΈν„°νμ΄μ¤**: Streamlit κΈ°λ°μ μ§κ΄€μ μΈ μ±„ν… μΈν„°νμ΄μ¤

## β¨ μ£Όμ” κΈ°λ¥

### π” μ§€λ¥ν• κ²€μƒ‰ μ‹μ¤ν…
- **λΈλλ“ κΈ°λ° μ§μ ‘ κ²€μƒ‰**: μ •ν™•ν• λΈλλ“ λ§¤μΉ­
- **λ²΅ν„° μ μ‚¬λ„ κ²€μƒ‰**: μλ―Έμ  μ μ‚¬μ„±μ„ ν†µν• κ²€μƒ‰
- **ν…μ¤νΈ κΈ°λ° ν΄λ°± κ²€μƒ‰**: ν‚¤μ›λ“ λ§¤μΉ­μ„ ν†µν• κ²€μƒ‰
- **μ‹¤μ‹κ°„ κ²€μƒ‰**: Perplexity APIλ¥Ό ν†µν• μµμ‹  μ •λ³΄ κ²€μƒ‰

### π‘¤ κ°μΈν™” μ¶”μ²
- **μ†λΉ„ ν¨ν„΄ λ¶„μ„**: λΈλλ“λ³„, μΉ΄ν…κ³ λ¦¬λ³„ μ„ νΈλ„ λ¶„μ„
- **μ‹κ°„ κ°€μ¤‘μΉ**: μµκ·Ό μ†λΉ„μ— λ†’μ€ κ°€μ¤‘μΉ λ¶€μ—¬
- **κ°μΈν™” μ¤μ½”μ–΄λ§**: μ‚¬μ©μ λ§μ¶¤ν• κ²°κ³Ό μμ„ κ²°μ •

### π·οΈ λ‹¤μ¤‘ μΉ΄ν…κ³ λ¦¬ μ§€μ›
- **μΉ΄ν**: μ¤νƒ€λ²…μ¤, ν¬μΈν”λ μ΄μ¤, μ΄λ””μ•Ό λ“±
- **νΈμμ **: GS25, CU, μ„ΈλΈμΌλ λΈ λ“±
- **λ§νΈ**: μ΄λ§νΈ, ν™ν”λ¬μ¤ λ“±
- **μ¨λΌμΈμ‡Όν•‘**: μΏ ν΅, μ§€λ§μΌ“, 11λ²κ°€ λ“±
- **μ‹λ‹Ή**: λ§¥λ„λ‚ λ“, KFC, λ²„κ±°ν‚Ή λ“±
- **λ·°ν‹°**: μ¬λ¦¬λΈμ λ“±
- **μλ£**: μ¨λ„λ¦¬μ•½κµ­ λ“±
- **κµν†µ**: μ§€ν•μ² , λ²„μ¤ λ“±

## π—οΈ μ‹μ¤ν… μ•„ν‚¤ν…μ²

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚   μ‚¬μ©μ μΏΌλ¦¬   β”‚β”€β”€β”€β–¶β”‚  LangGraph      β”‚β”€β”€β”€β–¶β”‚   κ°μΈν™” κ²°κ³Ό   β”‚
β”‚                 β”‚    β”‚  μ›ν¬ν”λ΅μ°     β”‚    β”‚                 β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
                              β”‚
                              β–Ό
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚  ChromaDB       β”‚β—€β”€β”€β”€β”‚  μ„λ² λ”© API     β”‚β”€β”€β”€β–¶β”‚  Perplexity API β”‚
β”‚  λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤β”‚    β”‚  (CLOVA Studio) β”‚    β”‚  μ‹¤μ‹κ°„ κ²€μƒ‰     β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”    β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### LangGraph μ›ν¬ν”λ΅μ°

1. **μΏΌλ¦¬ λ¶„μ„** β†’ 2. **μ‚¬μ©μ ν”„λ΅ν•„** β†’ 3. **κ²€μ¦** β†’ 4. **μ§μ ‘ κ²€μƒ‰** β†’ 5. **λ²΅ν„° κ²€μƒ‰** β†’ 6. **ν…μ¤νΈ κ²€μƒ‰** β†’ 7. **κ°μΈν™”** β†’ 8. **κ²°κ³Ό μƒμ„±**

## π€ μ„¤μΉ λ° μ‹¤ν–‰

### 1. μμ΅΄μ„± μ„¤μΉ

```bash
pip install langgraph chromadb requests numpy tqdm streamlit
```

### 2. λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ¶•

```bash
cd tools
python build_database.py
```

### 3. μ‹μ¤ν… μ‹¤ν–‰

#### μ½μ†” λ¨λ“
```bash
python main_rag_system.py
```

#### μ›Ή μΈν„°νμ΄μ¤
```bash
cd web
python run_app.py
# λλ”
streamlit run streamlit_app.py
```

## π μ›Ή μΈν„°νμ΄μ¤

### Streamlit μ›Ή μ•± νΉμ§•

- **μ±„ν… ν•νƒ μΈν„°νμ΄μ¤**: μ§κ΄€μ μΈ λ€ν™”ν• UI
- **μ‹¤μ‹κ°„ μ‹μ¤ν… μƒνƒ**: λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μƒνƒ, μ‚¬μ©μ μ΄λ ¥ λ“±
- **κ²€μƒ‰ κ³Όμ • μ‹κ°ν™”**: κ° λ‹¨κ³„λ³„ μ§„ν–‰ μƒν™© ν‘μ‹
- **κ°μΈν™” ν†µκ³„**: μ‚¬μ©μ μ†λΉ„ ν¨ν„΄ λ¶„μ„ κ²°κ³Ό
- **μμ‹ μΏΌλ¦¬**: μ›ν΄λ¦­ ν…μ¤νΈ κΈ°λ¥

### μ›Ή μ•± μ‹¤ν–‰ λ°©λ²•

1. **μλ™ μ‹¤ν–‰ μ¤ν¬λ¦½νΈ μ‚¬μ©**:
   ```bash
   cd web
   python run_app.py
   ```

2. **μ§μ ‘ Streamlit μ‹¤ν–‰**:
   ```bash
   cd web
   streamlit run streamlit_app.py
   ```

3. **λΈλΌμ°μ €μ—μ„ μ ‘μ†**: `http://localhost:8501`

### μ›Ή μ•± κΈ°λ¥

- **μ‹μ¤ν… μ΄κΈ°ν™”**: RAG μ‹μ¤ν… λ° λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°
- **μ±„ν… μΈν„°νμ΄μ¤**: μ§λ¬Έ μ…λ ¥ λ° μ‘λ‹µ ν™•μΈ
- **μ‹¤μ‹κ°„ ν†µκ³„**: κ²€μƒ‰ νμ, μ‹μ¤ν… μƒνƒ λ“±
- **λ””λ²„κ·Έ λ¨λ“**: μƒμ„Έν• κ²€μƒ‰ κ³Όμ • ν™•μΈ
- **μ‚¬μ©μ μ΄λ ¥**: κ°μΈν™”λ μ†λΉ„ ν¨ν„΄ λ¶„μ„

## π§ ν…μ¤νΈ

### μλ™ ν…μ¤νΈ μ¤ν¬λ¦½νΈ

```bash
cd test
python test_rag_system.py
```

### ν…μ¤νΈ λ‚΄μ©

1. **μ‹μ¤ν… μ΄κΈ°ν™” ν…μ¤νΈ**: RAG μ‹μ¤ν… λ° λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°
2. **μ‚¬μ©μ μ΄λ ¥ μƒμ„± ν…μ¤νΈ**: μƒν” λ°μ΄ν„° μƒμ„± λ° λ¶„μ„
3. **μΏΌλ¦¬ ν…μ¤νΈ**: λ‹¤μ–‘ν• κ²€μƒ‰ μ‹λ‚λ¦¬μ¤ ν…μ¤νΈ
4. **μ„±λ¥ ν…μ¤νΈ**: μ‘λ‹µ μ‹κ°„ λ° μ„±κ³µλ¥  μΈ΅μ •
5. **κ°λ³„ μ»΄ν¬λ„νΈ ν…μ¤νΈ**: API, νμ„ λ“± κ°λ³„ λ¨λ“ ν…μ¤νΈ

### ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

- λΈλλ“λ³„ μ§μ ‘ κ²€μƒ‰
- κ°μΈν™” μ¶”μ²
- μΉ΄ν…κ³ λ¦¬λ³„ κ²€μƒ‰
- μ†λΉ„ κΈ°λ° μ¶”μ²
- μ‹¤μ‹κ°„ κ²€μƒ‰ (DBμ— μ—†λ” ν•­λ©)

## π“– μ‚¬μ©λ²•

### κΈ°λ³Έ μ‚¬μ©λ²•

```python
from tools.main_rag_system import LangGraphRAGSystem

# μ‹μ¤ν… μ΄κΈ°ν™”
rag = LangGraphRAGSystem()

# λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°
rag.connect_database()

# μΏΌλ¦¬ μ‹¤ν–‰
result = rag.run("μ¤νƒ€λ²…μ¤ ν• μΈ ννƒ μμ–΄?", debug=True)
print(result)
```

### λ€ν™”ν• λ¨λ“

```bash
python main_rag_system.py
```

μ‹¤ν–‰ ν›„ λ‹¤μκ³Ό κ°™μ€ μΏΌλ¦¬λ¥Ό μ…λ ¥ν•  μ μμµλ‹λ‹¤:

- `"μ¤νƒ€λ²…μ¤ ν• μΈ ννƒ μμ–΄?"`
- `"λ‚΄ μ†λΉ„ ν¨ν„΄μ— λ§λ” ννƒ μ¶”μ²ν•΄μ¤"`
- `"μΉ΄ν ν• μΈ μ΄λ²¤νΈ κ¶κΈν•΄"`
- `"νΈμμ  μΏ ν° μλ‚?"`

## π” API κµ¬μ΅°

### PerplexityAPI
```python
perplexity = PerplexityAPI()
result = perplexity.search("μ¤νƒ€λ²…μ¤ ν• μΈ ννƒ")
```

### EmbeddingExecutor
```python
executor = EmbeddingExecutor(host, api_key, request_id)
embedding = executor.execute({"text": "κ²€μƒ‰ν•  ν…μ¤νΈ"})
```

### PersonalizedScoreCalculator
```python
calculator = PersonalizedScoreCalculator()
score = calculator.calculate_preference_score("μ¤νƒ€λ²…μ¤", "μΉ΄ν", user_history)
```

## π“ λ°μ΄ν„° κµ¬μ΅°

### ννƒ λ°μ΄ν„° κµ¬μ΅°
```python
{
    "id": "unique_id",
    "brand": "μ¤νƒ€λ²…μ¤",
    "category": "μΉ΄ν",
    "title": "ν• μΈ μ΄λ²¤νΈ",
    "benefit_type": "ν• μΈ",
    "discount_rate": 10.0,
    "conditions": "μ΅°κ±΄ μ„¤λ…",
    "valid_from": "2025-08-01",
    "valid_to": "2025-08-31",
    "is_active": True,
    "text": "μ „μ²΄ ν…μ¤νΈ λ‚΄μ©"
}
```

### μ‚¬μ©μ μ΄λ ¥ κµ¬μ΅°
```python
{
    "brand": "μ¤νƒ€λ²…μ¤",
    "category": "μΉ΄ν",
    "amount": 50000,
    "date": "2025-08-01T10:00:00"
}
```

## π› οΈ κΈ°μ  μ¤νƒ

- **LangGraph**: μ›ν¬ν”λ΅μ° κ΄€λ¦¬
- **ChromaDB**: λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤
- **CLOVA Studio**: μ„λ² λ”© μƒμ„±
- **Perplexity API**: μ‹¤μ‹κ°„ κ²€μƒ‰
- **Streamlit**: μ›Ή μΈν„°νμ΄μ¤
- **Python**: λ©”μΈ ν”„λ΅κ·Έλλ° μ–Έμ–΄
- **NumPy**: μμΉ κ³„μ‚°
- **Requests**: HTTP ν†µμ‹ 

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
ttugttag/
β”β”€β”€ README.md
β”β”€β”€ tools/
β”‚   β”β”€β”€ main_rag_system.py          # λ©”μΈ RAG μ‹μ¤ν…
β”‚   β”β”€β”€ api_utils.py                # API μ ν‹Έλ¦¬ν‹°
β”‚   β”β”€β”€ rag_types.py                # νƒ€μ… μ •μ
β”‚   β”β”€β”€ multi_category_parser.py    # μΏΌλ¦¬ νμ„
β”‚   β”β”€β”€ build_database.py           # λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ¶•
β”‚   β”β”€β”€ multi_category_dummy_data.py # λ”λ―Έ λ°μ΄ν„°
β”‚   β””β”€β”€ user_history_data.py        # μ‚¬μ©μ μ΄λ ¥ λ°μ΄ν„°
β”β”€β”€ web/
β”‚   β”β”€β”€ streamlit_app.py            # Streamlit μ›Ή μ•±
β”‚   β”β”€β”€ run_app.py                  # μ•± μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β”‚   β””β”€β”€ requirements.txt            # μ›Ή μ•± μμ΅΄μ„±
β””β”€β”€ test/
    β””β”€β”€ test_rag_system.py          # ν…μ¤νΈ μ¤ν¬λ¦½νΈ
```

### νμΌλ³„ μ—­ν• 

- **`tools/main_rag_system.py`**: LangGraph κΈ°λ° λ©”μΈ μ‹μ¤ν…
- **`tools/api_utils.py`**: Perplexity API, μ„λ² λ”© API, κ°μΈν™” μ¤μ½”μ–΄λ§
- **`tools/rag_types.py`**: RAG μ‹μ¤ν…μ μƒνƒ λ° νƒ€μ… μ •μ
- **`tools/multi_category_parser.py`**: λ‹¤μ¤‘ μΉ΄ν…κ³ λ¦¬ μΏΌλ¦¬ νμ‹±
- **`tools/build_database.py`**: ChromaDB λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ¶•
- **`tools/multi_category_dummy_data.py`**: ν…μ¤νΈμ© λ”λ―Έ λ°μ΄ν„°
- **`tools/user_history_data.py`**: μƒν” μ‚¬μ©μ μ†λΉ„ μ΄λ ¥
- **`web/streamlit_app.py`**: Streamlit μ›Ή μΈν„°νμ΄μ¤
- **`web/run_app.py`**: μ›Ή μ•± μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
- **`test/test_rag_system.py`**: μ‹μ¤ν… ν…μ¤νΈ μ¤ν¬λ¦½νΈ

## π’΅ μμ‹

### μμ‹ 1: λΈλλ“λ³„ κ²€μƒ‰
```
μ…λ ¥: "μ¤νƒ€λ²…μ¤ ν• μΈ ννƒ μμ–΄?"
μ¶λ ¥: 
π― κ°μΈν™” ννƒ μ¶”μ² κ²°κ³Ό:

**[1] μ¤νƒ€λ²…μ¤** (μΉ΄ν)
π― TWICE THE JOY
π’° μΏ ν°: 0% ν• μΈ
π“ μ΅°κ±΄: λ³΄μ  λ³„ 6κ° β†’ ν”„λΌν‘ΈμΉλ…Έ/λΈ”λ λ””λ“ 1+1 μΏ ν° κµν™
π“… κΈ°κ°„: 2025-08-11 ~ 2025-08-14
π“ κ°μΈν™”μ μ: 0.850
```

### μμ‹ 2: κ°μΈν™” μ¶”μ²
```
μ…λ ¥: "λ‚΄ μ†λΉ„ ν¨ν„΄μ— λ§λ” ννƒ μ¶”μ²ν•΄μ¤"
μ¶λ ¥:
π― κ°μΈν™” ννƒ μ¶”μ² κ²°κ³Ό:

**[1] μ¤νƒ€λ²…μ¤** (μΉ΄ν)
π― STAR SUMMER
π’° ννƒ: λ³µν•©
π“ μ΅°κ±΄: μ¤νƒ€λ²…μ¤ ν„λ€μΉ΄λ“ νΉμ • μ΅°κ±΄ μ¶©μ΅±
π“… κΈ°κ°„: 2025-08-08 ~ 2025-08-31
π“ κ°μΈν™”μ μ: 0.920

**[2] μ΄λ§νΈ** (λ§νΈ)
π― μ—¬λ¦„ νΉκ°€ μ΄λ²¤νΈ
π’° ν• μΈ: 15% ν• μΈ
π“ μ΅°κ±΄: 5λ§μ› μ΄μƒ κµ¬λ§¤ μ‹
π“… κΈ°κ°„: 2025-08-01 ~ 2025-08-31
π“ κ°μΈν™”μ μ: 0.850
```

### μμ‹ 3: μ‹¤μ‹κ°„ κ²€μƒ‰
```
μ…λ ¥: "μ• ν”μ›μΉ ν• μΈ"
μ¶λ ¥:
π μ‹¤μ‹κ°„ κ²€μƒ‰ κ²°κ³Ό (Perplexity):

2025λ…„ 8μ›” ν„μ¬ μ• ν”μ›μΉ ν• μΈ ννƒ μ΄λ²¤νΈ ν”„λ΅λ¨μ… μΏ ν°μ— λ€ν• μ •λ³΄μ…λ‹λ‹¤...

[μ‹¤μ‹κ°„ κ²€μƒ‰ κ²°κ³Ό λ‚΄μ©]
```

## π¤ κΈ°μ—¬ν•κΈ°

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## π“ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” MIT λΌμ΄μ„ μ¤ ν•μ— λ°°ν¬λ©λ‹λ‹¤.

## π“ λ¬Έμ

ν”„λ΅μ νΈμ— λ€ν• λ¬Έμμ‚¬ν•­μ΄ μμΌμ‹λ©΄ μ΄μλ¥Ό μƒμ„±ν•΄μ£Όμ„Έμ”.

---

**TTUGTTAG** - The Ultimate Guide To The Best Offers & Deals π―